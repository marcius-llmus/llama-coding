<div id="prompt-form-container" class="p-4 bg-dark-lighter rounded-md border-l-2 border-primary">
    <form
        {% if prompt %}
            hx-put="/prompts/{{ prompt.id }}"
            hx-target="#prompt-{{ prompt.id }}"
        {% else %}
            hx-post="/prompts/"
            hx-target="{{ target_selector }}"
            hx-swap="beforeend"
        {% endif %}
        hx-ext="form-json"
        hx-on::after-request="htmx.find('#prompt-form-container').remove()"
    >
        <div class="space-y-3">
            <input type="text" name="name" placeholder="Prompt Name" value="{{ prompt.name if prompt else '' }}" class="w-full bg-dark-card border border-dark-light rounded-lg px-3 py-2 text-sm" required>
            <textarea name="content" placeholder="Prompt Content..." rows="4" class="w-full bg-dark-card border border-dark-light rounded-lg px-3 py-2 text-sm" required>{{ prompt.content if prompt else '' }}</textarea>

            <input type="hidden" name="type" value="{{ prompt.type if prompt else prompt_type }}">
            {% if (prompt and prompt.project_id) or prompt_type == 'project' %}
                <input type="hidden" name="project_id" value="{{ prompt.project_id if prompt else project_id }}">
            {% endif %}

            <div class="flex justify-end space-x-2">
                <button type="button" onclick="htmx.find('#prompt-form-container').remove()" class="px-3 py-1 bg-dark-light hover:bg-dark-light border border-dark-light rounded-lg text-xs">Cancel</button>
                <button type="submit" class="px-3 py-1 bg-primary hover:bg-primary-dark rounded-lg text-xs font-medium text-white">{{ 'Save' if prompt else 'Create' }}</button>
            </div>
        </div>
    </form>
</div>